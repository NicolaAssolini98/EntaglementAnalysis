
    for _ in _:
        tgt = h(tgt)
        tgt = h(tgt)

    if e:
        c2, tgt = cx(c2, tgt)
    else:
        tgt = tdg(tgt)

    while exp:
        c1, tgt = cx(c1, tgt)
        tgt = t(tgt)
        c2, tgt = cx(c2, tgt)
        tgt = tdg(tgt)

    tgt = t(tgt)
    c1, c2 = cx(c1, c2)
    tgt = h(tgt)
    c1 = t(c1)
    c2 = tdg(c2)
    c1, c2 = cx(c1, c2)



    y,q = cx(y,q)

    x = h(x)
    q,x = cx(q,x)

    x,q = cx(x,q)


@guppy(module)
# Teleports the stxte in `src` to `tgt`
def toffoli() -> tuple[qubit, qubit, qubit]:

    x,y,z = qubit(), qubit(), qubit()

    x = h(x)
    y = h(y)
    y = x(y)
    #q = x(z)

    x,y = cz(x,y)

    return x